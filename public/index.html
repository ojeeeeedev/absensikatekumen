<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Presensi Katekumen Dewasa</title>
    <link rel="icon" href="favicon.png" type="image/png" />
    <script src="https://unpkg.com/html5-qrcode"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400&family=Inter:wght@300;400;500&family=Playfair+Display:wght@500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
  </head>

  <body>
    <div class="liquid-background">
      <div class="liquid-shape shape1"></div>
      <div class="liquid-shape shape2"></div>
    </div>

    <!-- Loading screen for login -->
    <div id="login-loader" style="display: none; flex-direction: column; align-items: center; justify-content: center; position: fixed; inset: 0; background: rgba(0,0,0,0.8); z-index: 1000;">
      <div class="spinner"></div>
    </div>

    <div id="login-header">
      <img src="pewartaan_invert.png" alt="Logo">
      <div class="login-header-text">
        <div>Subseksi Katekumen Dewasa</div>
        <div>Bidang Pewartaan</div>
        <div>Paroki St. Petrus - Katedral</div>
        <div>Keuskupan Bandung</div>
      </div>
    </div>

    <main id="app-container" class="glass-container">
      <div id="login-container">
        <h1>Login Fasilitator</h1>
        <!-- New error container -->
        <div id="login-error-box" class="login-error-message" style="display: none;" onmouseover="hideLoginError()"></div>
        <div class="input-wrapper">
          <!-- Added oninput to hide error when user types -->
          <input type="password" id="login-input" placeholder="Masukkan password..." onkeydown="if(event.key==='Enter') handleLogin()" oninput="hideLoginError()">
          <span id="login-success-icon" class="material-icons-outlined" style="display: none;">check_circle</span>
          <span id="password-toggle" class="material-icons-outlined password-toggle-icon" onclick="togglePasswordVisibility()">visibility_off</span>
        </div>
        <div id="login-btn" onclick="handleLogin()"><b>Masuk</b></div>
        <br>
      </div>

      <div id="scanner-ui" style="display: none; width: 100%; flex-direction: column; align-items: center;">
  
        <div class="header-container">
          <img src="katedral_invert.png" class="header-logo" alt="Logo" style="height: 100px; width: auto;">
          <div class="header-text">
            <h1>Presensi Katekumen Dewasa</h1>
            <h2>Paroki St. Petrus - Katedral 
              <br><h2 style="font-size: 0,65;">Bandung</h2>
            </h2>
          </div>
        </div>
  
        <div id="topic-trigger" class="topic-selector-btn" onclick="openTopicModal()">
            Pilih Topik...
        </div>
  
        <div id="reader-container">
            <div id="camera-loader">
                <div class="spinner"></div>
                <span style="margin-top:10px;">Memuat Kamera...</span>
            </div>
            <div id="reader"></div>
        </div>
  
        <div id="status" class="idle"></div> 
  
        <footer>
          <a href="https://github.com/ojeeeeedev/absensikatekumen" style=" color: #9A2126; text-decoration: none;">v1.1</a> Â© 2025 Tim IT Katekumen Dewasa<br>
          <a href="https://wa.link/rogbpe">Ada kendala?</a>
        </footer>
      </div>
      <!-- This footer is only for the login screen -->
      <div id="login-footer" style="display: block;">
        <div style="font-size: 0.8rem; text-align: center">
          <a href="https://wa.link/3yg0ug" style="color: #9A2126; text-decoration: none;">Lupa password?</a><br>
        </div>
      </div>
    </main>

    <div id="topic-modal">
        <div class="modal-content">
            <h3>Pilih Topik Absensi</h3>
            <input type="text" id="topic-search-input" oninput="filterTopics()" placeholder="Cari topik...">
            <div id="topic-list-container">
                <div style="text-align:center; padding:20px; color:#666;">Memuat topik...</div>
            </div>
            <div class="modal-close-btn" onclick="closeTopicModal()">Tutup</div>
        </div>
    </div>

    <div style="position: fixed; bottom: 40px; left: 0; width: 100%; text-align: center; z-index: 1; pointer-events: none;">
      <img src="katedral_invert.png" alt="Logo" style="height: 85px; width: auto;">
    </div>

    <script src="script.js"></script>
    <script>
       window.si = window.si || function () { (window.siq = window.siq || []).push(arguments); };
    </script>
  <script defer src="/_vercel/speed-insights/script.js"></script>
    <script>
       window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
    </script>
  <script defer src="/_vercel/insights/script.js"></script>
  </body>
</html>