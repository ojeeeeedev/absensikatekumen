<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Presensi Katekumen Dewasa</title>
    <link rel="icon" href="favicon.png" type="image/png" />
    <script src="https://unpkg.com/html5-qrcode"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400&family=Inter:wght@300;400;500&family=Playfair+Display:wght@500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
  </head>

  <body>
    <div class="liquid-background">
      <div class="liquid-shape shape1"></div>
      <div class="liquid-shape shape2"></div>
    </div>

    <!-- Loading screen for login -->
    <div id="login-loader">
      <div class="spinner"></div>
    </div>

    <!-- <div id="login-header">
      <img src="katedral_invert.png" alt="Logo">
    </div> -->

    <main id="app-container" class="glass-container">
      <div id="login-container">
        <h1>Login Fasilitator</h1>
        <!-- Error container -->
        <div id="login-error-box" class="login-error-message" style="display: none;" onmouseover="hideLoginError()"></div>
        <div class="input-wrapper">
          <input type="password" id="login-input" placeholder="Masukkan password..." onkeydown="if(event.key==='Enter') handleLogin()" oninput="hideLoginError()">
          <span id="login-success-icon" class="material-icons-outlined" style="display: none;">check_circle</span>
          <span id="password-toggle" class="material-icons-outlined password-toggle-icon" onclick="togglePasswordVisibility()">visibility_off</span>
        </div>
        <div id="login-btn" onclick="handleLogin()"><b>Masuk</b></div>
        <br>
      </div>

      <div id="scanner-ui">
  
        <div class="header-container">
          <img src="pewartaan_invert.png" class="header-logo" alt="Logo">
          <div class="header-text">
            <h1>Presensi Katekumen Dewasa</h1>
            <h2>Paroki St. Petrus - Katedral 
              <br>Bandung
            </h2>
          </div>
        </div>
  
        <div id="topic-trigger" class="topic-selector-btn" onclick="openTopicModal()">
            Pilih Topik...
        </div>
  
        <div id="reader-container">
            <div id="camera-loader">
                <div class="spinner"></div>
                <span>Memuat Kamera...</span>
            </div>
            <div id="reader"></div>
        </div>
  
        <div id="status" class="idle"></div> 
  
        <footer class="app-footer">
          <a href="https://docs.google.com/spreadsheets/d/1R850gMMg-97HQAWNHQ-aId7l_Ta1Ewl9sN5YvoqDo0g/edit?usp=sharing" class="speed-icon-link">
            <span class="material-icons-outlined">speed</span>
            <span>Akses Dashboard</span>
          </a>
          <div class="footer-text">
            <a href="https://github.com/ojeeeeedev/absensikatekumen" class="footer-link">v1.3.1</a> Â© 2026 Tim Katekumen Dewasa<br>
            <a href="https://wa.link/rogbpe" class="footer-link">Ada kendala?</a>
          </div>
        </footer>
      </div>
      
      <!-- This footer is only for the login screen -->
      <div id="login-footer">
        <div>
          <a href="https://wa.link/3yg0ug">Lupa password?</a><br>
        </div>
      </div>
    </main>

    <div id="topic-modal">
        <div class="modal-content">
            <h3>Pilih Topik Absensi</h3>
            <input type="text" id="topic-search-input" oninput="filterTopics()" placeholder="Cari topik...">
            <div id="topic-list-container">
                <div class="topic-loading-placeholder">Memuat topik...</div>
            </div>
            <div class="modal-close-btn" onclick="closeTopicModal()">Tutup</div>
        </div>
    </div>

    <!-- Profile Modal -->
    <div id="profile-modal">
        <div class="profile-card">
            <div class="timeout-spinner">
              <svg viewBox="0 0 36 36">
                <path class="circle-bg" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" />
                <path class="circle-progress" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" />
              </svg>
            </div>
            <div class="profile-img-wrapper">
                <img id="profile-image">
            </div>
            <div id="profile-name" class="profile-name"></div>
            <div id="profile-id" class="profile-id"></div>
            <div class="profile-close-btn" onclick="closeProfileModal()">Tutup</div>
        </div>
    </div>

    <div id="bottom-logo">
      <img src="pewartaan_invert.png" alt="Logo" width="64" height="64">
      <div class="login-header-text">
        <div>Subseksi Katekumen Dewasa</div>
        <div>Bidang Pewartaan</div>
        <div>Paroki St. Petrus - Katedral</div>
        <div>Keuskupan Bandung</div>
      </div>
    </div>

    <script src="topics.js"></script>
    <script src="script.js"></script>
    <script>
       window.si = window.si || function () { (window.siq = window.siq || []).push(arguments); };
    </script>
  <script defer src="/_vercel/speed-insights/script.js"></script>
    <script>
       window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
    </script>
  <script defer src="/_vercel/insights/script.js"></script>
  </body>
</html>